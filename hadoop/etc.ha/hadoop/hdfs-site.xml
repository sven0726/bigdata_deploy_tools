<?xml version="1.0" encoding="UTF-8"?>

<!--Autogenerated by Cloudera Manager-->
<configuration>
  <property>
    <name>dfs.namenode.name.dir</name>
    <value>file:///data/app/hadoop/dfs/name</value>
  </property>

  <property>
    <name>dfs.datanode.data.dir</name>
    <value>file:///data/app/hadoop/dfs/data</value>
  </property> 

  <property>
    <name>dfs.replication</name>
    <value>2</value>
  </property>
  <property>
    <name>dfs.blocksize</name>
    <value>134217728</value>
  </property>
  <property>
    <name>dfs.client.use.datanode.hostname</name>
    <value>false</value>
  </property>
  <property>
    <name>fs.permissions.umask-mode</name>
    <value>022</value>
  </property>
  <property>
    <name>dfs.client.read.shortcircuit</name>
    <value>flase</value>
  </property>
  <property>
    <name>dfs.client.read.shortcircuit.skip.checksum</name>
    <value>false</value>
  </property>
  <property>
    <name>dfs.client.domain.socket.data.traffic</name>
    <value>false</value>
  </property>
  <property>
    <name>dfs.datanode.hdfs-blocks-metadata.enabled</name>
    <value>true</value>
  </property>

<!--namenode HA start-->
  <!--dfs.nameservices 命名空间的逻辑名称-->
  <property>
    <name>dfs.nameservices</name>
    <value>mycloud</value>
  </property>
  
  <!--dfs.ha.namenodes.[nameservice ID] 命名空间中所有NameNode的唯一标示名称-->
  <property>
    <name>dfs.ha.namenodes.mycloud</name>
    <value>nn1,nn2</value>
  </property>

  <!--dfs.namenode.rpc-address.[nameservice ID].[name node ID] 每个namenode监听的RPC地址-->
  <property>
    <name>dfs.namenode.rpc-address.mycloud.nn1</name>
    <value>master.cloud:8020</value>
  </property>
  <property>
    <name>dfs.namenode.rpc-address.mycloud.nn2</name>
    <value>master2.cloud:8020</value>
  </property>

  <!--dfs.namenode.http-address.[nameservice ID].[name node ID] 每个namenode监听的http地址-->
  <property>
    <name>dfs.namenode.http-address.mycloud.nn1</name>
    <value>master.cloud:50070</value>
  </property>
  <property>
    <name>dfs.namenode.http-address.mycloud.nn2</name>
    <value>master2.cloud:50070</value>
  </property>

  <!--dfs.namenode.shared.edits.dir 这是NameNode读写JNs组的uri。通过这个uri，NameNodes可以读写edit log内容。URI的格式"qjournal://host1:port1;host2:port2;host3:port3/journalId"。这里的host1、host2、host3指的是Journal Node的地址，这里必须是奇数个，至少3个-->
  <property>
    <name>dfs.namenode.shared.edits.dir</name>
    <value>qjournal://master.cloud:8485;slave01.cloud:8485;slave02.cloud:8485/mycloud</value>
  </property>

  <!--dfs.client.failover.proxy.provider.[nameservice ID] 这里配置HDFS客户端连接到Active NameNode的一个java类。-->
  <property>
    <name>dfs.client.failover.proxy.provider.mycloud</name>
    <value>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</value>
  </property>

   <!--dfs.ha.fencing.methods 配置active namenode出错时的处理类。当active namenode出错时，一般需要关闭该进程。处理方式可以是ssh也可以是shell-->
   <!--使用ssh-->
  <property>
    <name>dfs.ha.fencing.methods</name>
    <value>sshfence</value>
  </property>

  <property>
    <name>dfs.ha.fencing.ssh.private-key-files</name>
    <value>/home/hadoop/.ssh/id_rsa</value>
  </property>
  
   <!--dfs.journalnode.edits.dir 这是JournalNode进程保持逻辑状态的路径。这是在linux服务器文件的绝对路径-->
  <property>
    <name>dfs.journalnode.edits.dir</name>
    <value>/data/app/hadoop/journal/node/local/data</value>
  </property>
 
  <!--配置自动转移-->
  <property>
   <name>dfs.ha.automatic-failover.enabled</name>
   <value>true</value>
 </property> 
  <!--namenode HA finish-->


</configuration>
